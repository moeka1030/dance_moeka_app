<%# homeã®ãƒ“ãƒ¥ãƒ¼ %>
<h1>HOME</h1>

<div class="post-grid">
  <% @posts.each do |post| %>
    <div class="post-item">
      <div class="post-thumbnail">
        <% if post.video.attached? %>
          <video class="video-content" controls>
            <source src="<%= url_for(post.video) %>" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        <% else %>
          <p class="no-video">å‹•ç”»ãªã—</p>
        <% end %>
      </div>

      <p class="post-category"><%= post.genre %></p>

      <!-- ã„ã„ã­ãƒœã‚¿ãƒ³ï¼ˆãƒ­ã‚°ã‚¤ãƒ³æ™‚ã®ã¿è¡¨ç¤ºï¼‰ -->
      <% if user_signed_in? %>
      <div class="like-button-container">
        <% if post.likes.exists?(user: current_user) %>
          <%= link_to post_like_path(post), method: :delete, class: "like-button active" do %>
            ğŸ©·
          <% end %>
        <% else %>
          <%= link_to post_likes_path(post), method: :post, class: "like-button" do %>
            ğŸ¤
          <% end %>
        <% end %>
      </div>
      <% end %>

    </div>
  <% end %>
</div>
