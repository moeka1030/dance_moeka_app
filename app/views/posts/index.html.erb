<%# homeのビュー %>
<h1>HOME</h1>

<div class="post-grid">
  <% @posts.each do |post| %>
    <div class="post-item">
      <div class="post-thumbnail">
        <% if post.video.attached? %>
          <video class="video-content" controls>
            <source src="<%= url_for(post.video) %>" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        <% else %>
          <p class="no-video">動画なし</p>
        <% end %>
      </div>

      <p class="post-category"><%= post.genre %></p>

      <!-- いいねボタン（ログイン時のみ表示） -->
      <!-- いいねボタン（ログイン時のみ表示） -->
<% if user_signed_in? %>
  <div class="like-button-container" data-post-id="<%= post.id %>">
    <% if current_user.likes.exists?(post_id: post.id) %>
      <%= button_to "🩷", post_likes_path(post), method: :delete, class: "like-button active", remote: true %>
    <% else %>
      <%= button_to "🤍", post_likes_path(post), method: :post, class: "like-button", remote: true %>
    <% end %>
  </div>
<% end %>

    </div>
  <% end %>
</div>
